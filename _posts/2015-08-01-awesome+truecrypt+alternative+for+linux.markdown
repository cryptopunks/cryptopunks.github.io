---
layout: post
title:  "Лучшая альтернатива TrueCrypt под Linux"
meta_description: "Инструкция по использованию пакета cryptsetup c множеством примеров"
date:   2015-08-01 01:09:00
categories: article
tags: truecrypt luks linux secure container crypt
---

## Краткое описание

Существует огромное кол-во мнений по поводу небезопасности использования TrueCrypt, мы эти домыслы поддерживать не будем, но расскажем о достойной альтернативе под ОС Linux. Сегодня поговорим о технологии LUKS (Linux Unified Key Setup).<br>
LUKS умеет шифровать как сами диски так и создавать криптоконтейнеры непосредственно в файлах. Поговорим о последнем варианте, т.к. первый обычно умеют все современные инсталляторы популярных дистрибутивов, а если вы гик и хотите сделать всё сами, то вероятнее всего найдёте необходимый мануал самостоятельно.<br>
К слову: LUKS поддерживает огромное кол-во шифров и шустрее TrueCrypt, т.к. работает на уровне ядра ОС.

Имеется так же более продвинутая статья [Маскируем LUKS-контейнер под бинарный мусор](/article/hide-luks-container).

## Необходимые шаги

1) Ставим пакет cryptsetup:

`$ sudo apt-get install cryptsetup`

2) Создаём пустой файл для будущего контейнера (например 200Мб):

`$ fallocate -l 200M /home/user/darkthrone.avi`

(слабая, но хоть какая-то маскировка; под видеоклип)

3) Создаём в этом файле криптоконтейнер:

`$ sudo cryptsetup -y luksFormat /home/user/darkthrone.avi`

Отвечаем утвердительно набирая в большом регистре YES, повторив два раза пароль.

4) Открываем контейнер:

`$ sudo cryptsetup luksOpen /home/user/darkthrone.avi decrypt_data`

5) Создаём на нём файловую систему:

`$ sudo mkfs.ext4 /dev/mapper/decrypt_data`

6) Создаём каталог для монтирования:

`$ sudo mkdir /mnt/data`

7) Монтируем расшифрованный контейнер:

`$ sudo mount /dev/mapper/decrypt_data /mnt/data`

8) Записываем необходимые файлы в **/mnt/data**, после чего его можно отмонтировать:

`$ sudo umount /mnt/data`

9) Извлекаем контейнер:

`$ sudo cryptsetup luksClose /dev/mapper/decrypt_data`

Копируем файл **/home/user/darkthrone.avi** например на флешку и повторяем шаги 4, 7 всякий раз когда хотим им воспользоваться и шагами 8, 9 чтобы затереть за собой следы.
